import{_ as b,r as i,a as V,b as l,o as x,c as y,j as e,g as S,e as s,f as u,h as k,p as I,m as N}from"./index-CsSw0Q1X.js";import{u as j,a as U}from"./authApi-Ba_lUtnu.js";import{s as B}from"./request-sBhsa8yO.js";const a=r=>(I("data-v-195b33e8"),r=r(),N(),r),C={class:"login-page"},E=a(()=>e("div",{class:"flex justify-end mr-8"},null,-1)),O={class:"login-head"},R=a(()=>e("h3",null,"密码登录",-1)),q={href:"javascript:"},L={class:"cp-cell"},T=a(()=>e("span",null,"我已同意",-1)),F=a(()=>e("a",{href:"javascript:;"},"用户协议",-1)),J=a(()=>e("span",null,"及",-1)),K=a(()=>e("a",{href:"javascript:;"},"隐私条款",-1)),M={class:"cp-cell"},z=a(()=>e("div",{class:"cp-cell"},[e("a",{href:"javascript:;"},"忘记密码？")],-1)),A={__name:"index",setup(r){const t=i({username:"",password:""}),d=i(!1),p=V(),m=async()=>{if(!d.value){B({type:"warning",message:"请勾选用户协议"});return}const c=await j(t.value);await f(c)};async function f(c){localStorage.setItem("TOKEN",c);const o=await U();localStorage.setItem("USER_INFO",JSON.stringify(o)),await p.replace("/home")}return i(!1),(c,o)=>{const v=l("van-icon"),_=l("van-field"),h=l("van-checkbox"),g=l("van-button"),w=l("van-form");return x(),y("div",C,[E,e("div",O,[R,e("a",q,[e("span",{onClick:o[0]||(o[0]=()=>S(p).push("/register"))},"注册"),s(v,{name:"arrow"})])]),s(w,{onSubmit:m,ref:"formRef"},{default:u(()=>[s(_,{modelValue:t.value.username,"onUpdate:modelValue":o[1]||(o[1]=n=>t.value.username=n),name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),s(_,{modelValue:t.value.password,"onUpdate:modelValue":o[2]||(o[2]=n=>t.value.password=n),type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),e("div",L,[s(h,{modelValue:d.value,"onUpdate:modelValue":o[3]||(o[3]=n=>d.value=n)},{default:u(()=>[T,F,J,K]),_:1},8,["modelValue"])]),e("div",M,[s(g,{"native-type":"submit",block:"",round:"",type:"primary"},{default:u(()=>[k(" 登 录 ")]),_:1})]),z]),_:1},512)])}}},P=b(A,[["__scopeId","data-v-195b33e8"]]);export{P as default};
