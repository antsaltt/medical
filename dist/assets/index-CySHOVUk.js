import{a as L,o as i,c as _,j as t,t as d,g as k,x as D,r as l,u as G,w as P,b as u,e as c,f as U,F as z,k as F,l as b}from"./index-CsSw0Q1X.js";import{d as S,h as $,u as E,f as T}from"./businessApi-BLeheLW9.js";import"./request-sBhsa8yO.js";const A={class:"p-1.5"},H={class:"w-1/4"},J=["src"],K={class:"w-2/4 flex flex-col gap-1"},M={class:"font-bold"},O={class:"text-gray-400 text-base"},Q={class:"text-sm text-gray-400"},W={class:"text-base"},X=t("div",null,null,-1),Y={class:"w-1/4 p-2.5 flex items-center justify-center"},Z={class:"border text-gray-400 h-14 w-20 flex flex-col items-center justify-center border-orange-400"},tt={class:"text-orange-400"},et=t("span",{class:"text-zinc-700 mt-1"},"评分",-1),at={__name:"DoctorPreview",props:["name","title","department","hosName","avatar","id","rate"],setup(n){const f=L();return(r,o)=>(i(),_("div",A,[t("div",{onClick:o[0]||(o[0]=()=>k(f).push({path:"/registration",query:{id:n.id}})),class:"w-full border-b-2 pb-1.5 flex gap-2 items-center"},[t("div",H,[t("img",{style:{width:"100%"},class:"rounded-full",src:n.avatar,alt:""},null,8,J)]),t("div",K,[t("div",null,[t("span",M,d(n.name),1),t("span",O,d(n.title),1)]),t("div",Q,d(n.department),1),t("div",W,d(n.hosName),1),X]),t("div",Y,[t("div",Z,[t("span",tt,d(n.rate===-1?"暂无评分":n.rate),1),et])])])]))}},st={class:"p-1.5"},rt={__name:"index",setup(n){const r=D({...{current:1,total:0,pageSize:30},departmentId:"",hosId:""}),o=l([]),h=l([]),x=l([]),m=l(0),v=l(0),g=[{text:"全部医院",value:0}],w=[{text:"全部科室",value:0}];async function p(){const e=await T(r);o.value=e.records}async function V(){h.value=await S({}),x.value=await $({}),w.push(...h.value.map(e=>({text:e.name,value:e.id}))),g.push(...x.value.map(e=>({text:e.name,value:e.id})))}V();const C=L(),I=G(),N=l([]);async function R(){N.value=await E()}return R(),P(()=>I.query.departmentId,e=>{e&&(r.departmentId=e),p()},{immediate:!0}),(e,s)=>{const B=u("van-nav-bar"),y=u("van-dropdown-item"),j=u("van-dropdown-menu"),q=u("van-empty");return i(),_("div",null,[c(B,{title:"医生列表","left-text":"返回","left-arrow":"",onClickLeft:s[0]||(s[0]=()=>k(C).push("/home"))}),c(j,null,{default:U(()=>[c(y,{onChange:s[1]||(s[1]=()=>{r.hosId=m.value,p()}),modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=a=>m.value=a),options:g},null,8,["modelValue"]),c(y,{onChange:s[3]||(s[3]=()=>{r.departmentId=v.value,p()}),modelValue:v.value,"onUpdate:modelValue":s[4]||(s[4]=a=>v.value=a),options:w},null,8,["modelValue"])]),_:1}),t("div",st,[o.value.length>0?(i(!0),_(z,{key:0},F(o.value,a=>(i(),b(at,{id:a.id,name:a.name,title:a.title,rate:a.rate,department:a.departmentName,"hos-name":a.hosName,avatar:a.avatar},null,8,["id","name","title","rate","department","hos-name","avatar"]))),256)):(i(),b(q,{key:1,image:"error",description:"暂无数据"}))])])}}};export{rt as default};
